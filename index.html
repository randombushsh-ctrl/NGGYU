<!DOCTYPE html>
<html>
<head>
    <style>
        /* ... (TwÃ³j CSS pozostaje bez zmian) ... */
    </style>
</head>
<body id="body">
    <!-- NakÅ‚adka startowa -->
    <div id="play-overlay">
        <button id="start-button" onclick="startExperience()">START</button>
        <div id="loading">Åadowanie danych...</div>
    </div>

    <!-- TreÅ›Ä‡ strony -->
    <div id="content" style="display:none">
        <h1>ELO MORDO</h1>

        <!-- Kontener na wideo -->
        <div id="video-container">
            <video id="main-video" playsinline loop>
                <source src="movie.mp4" type="video/mp4">
            </video>
            <div id="overlay"></div>
        </div>

        <div id="hearts-container"></div>
        
        <button id="add-heart-btn" onclick="addHeart()">NO DAJ SERDUSZKO MORDO â¤ï¸</button>

        <!-- Liczniki na dole -->
        <div class="counters">
            <div class="counter">WejÅ›cia: <span id="visit-counter">0</span></div>
            <div class="counter">Serduszka: <span id="heart-counter">0</span></div>
        </div>

        <!-- Przycisk dÅºwiÄ™ku -->
        <button id="sound-button" onclick="toggleSound()">ğŸ”Š</button>
    </div>

    <script>
        // KONFIGURACJA SKRYPTU GOOGLE
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwOB45wtuF2suVO2Y7aWQrymzmVxLd_SlkeSolAZ135zP4zsJqR_XMamMdRfTB1gmoe/exec';

        // Funkcje do obsÅ‚ugi licznikÃ³w
        async function fetchCounters() {
            try {
                const response = await fetch(`${SCRIPT_URL}?action=getCounters`);
                const data = await response.json();
                document.getElementById('visit-counter').textContent = data.visits;
                document.getElementById('heart-counter').textContent = data.hearts;
            } catch (error) {
                console.error('BÅ‚Ä…d pobierania licznikÃ³w:', error);
            }
        }

        async function incrementVisits() {
            try {
                await fetch(`${SCRIPT_URL}?action=incrementVisits`, { method: 'POST' });
                await fetchCounters();
            } catch (error) {
                console.error('BÅ‚Ä…d zwiÄ™kszania wejÅ›Ä‡:', error);
            }
        }

        async function incrementHearts() {
            try {
                await fetch(`${SCRIPT_URL}?action=incrementHearts`, { method: 'POST' });
                await fetchCounters();
            } catch (error) {
                console.error('BÅ‚Ä…d zwiÄ™kszania serduszek:', error);
            }
        }

        // Ukryj Å‚adowanie po 3 sekundach
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
        }, 3000);

        // Funkcja uruchamiana po klikniÄ™ciu START
        async function startExperience() {
            // Ukryj nakÅ‚adkÄ™ startowÄ…
            document.getElementById('play-overlay').style.display = 'none';
            
            // PokaÅ¼ treÅ›Ä‡
            document.getElementById('content').style.display = 'block';
            
            // Start tÄ™czowego tÅ‚a
            document.getElementById('body').classList.add('rainbow-bg');
            
            // Start wideo z dÅºwiÄ™kiem
            const video = document.getElementById('main-video');
            video.muted = false;
            video.play()
                .then(() => console.log("Wideo odtwarza siÄ™ z dÅºwiÄ™kiem"))
                .catch(error => {
                    console.error("BÅ‚Ä…d odtwarzania:", error);
                    video.muted = true;
                    video.play();
                });

            // ZwiÄ™ksz licznik wejÅ›Ä‡
            await incrementVisits();
            
            // SprawdÅº, czy uÅ¼ytkownik juÅ¼ dodaÅ‚ serduszko
            if (localStorage.getItem('heartGiven') === 'true') {
                document.getElementById('add-heart-btn').disabled = true;
                document.getElementById('add-heart-btn').textContent = "DziÄ™kujemy!";
            }
        }

        // Automatyczne restartowanie wideo
        document.getElementById('main-video').addEventListener('ended', function() {
            this.currentTime = 0;
            this.play();
        }, false);

        // Funkcja wÅ‚Ä…czajÄ…ca/wyÅ‚Ä…czajÄ…ca dÅºwiÄ™k
        function toggleSound() {
            const video = document.getElementById('main-video');
            video.muted = !video.muted;
            document.getElementById('sound-button').textContent = video.muted ? "ğŸ”‡" : "ğŸ”Š";
        }

        // Dodawanie serduszka
        async function addHeart() {
            if (localStorage.getItem('heartGiven') !== 'true') {
                await incrementHearts();
                localStorage.setItem('heartGiven', 'true');
                
                // Dodaj serduszko w UI
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = Math.random() * 80 + '%';
                document.getElementById('hearts-container').appendChild(heart);
                
                // Zaktualizuj przycisk
                document.getElementById('add-heart-btn').disabled = true;
                document.getElementById('add-heart-btn').textContent = "DziÄ™kujemy!";
            }
        }

        // Inicjalizacja: pobierz liczniki przy Å‚adowaniu strony
        document.addEventListener('DOMContentLoaded', fetchCounters);
    </script>
</body>
</html>
